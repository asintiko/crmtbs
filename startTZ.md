Полное Техническое Задание (ТЗ) v2.0

Система складского учета "Inventory Desktop"

1. Общие требования и Стек
Тип приложения: Desktop (Windows/macOS).
Платформа: Electron (Latest Stable).
Frontend: React + TypeScript + Vite.
Стили: Tailwind CSS (строгая поддержка Dark/Light mode).
База данных: SQLite (локальное хранение файла .db в папке пользователя).
ORM: Prisma или Better-sqlite3.
Архитектура: Офлайн-first. Никаких внешних API, авторизации и облаков.
Безопасность: Отсутствие логина/пароля. Запуск сразу в рабочую среду.
2. Пользовательский интерфейс (UI/UX)
Концепция: "Business Minimal". Высокая контрастность, отсутствие лишнего визуального шума.
Навигация: Боковое меню (Sidebar) с возможностью сворачивания (только иконки / иконки + текст).
Разделы меню:
Главная (Дашборд).
Склад (Текущие остатки).
Журнал операций (Аналог вкладки "Рабочая").
Справочник товаров (Названия и синонимы).
Настройки (Темы, Бэкап, Импорт).
3. Детальное описание модулей

3.1. Модуль "Склад" (Витрина остатков)
Таблица формируется динамически на основе всех операций из Журнала. Редактировать ячейки с цифрами здесь нельзя (только через корректировочную операцию).

Столбцы:

Наименование: (Главное название из справочника).
Всего на балансе: (Физически на складе + Отгружено в долг).
Доступно: (Всего - Бронь - Отгружено в долг).
Бронь: (Кол-во).
В долгу у клиентов: (Товар отгружен, но не оплачен). Выделять цветом, если > 0.
Инфо: Иконки-статусы (например, "Разрешение на ввоз" — берется из карточки товара).
Действия: Кнопка "Посмотреть историю движения" (фильтрует журнал по этому товару).
3.2. Модуль "Справочник" (Синонимы и Карточки)
Решает проблему дублей названий.

Сущность "Товар" (Product):

Поля: Основное название, Артикул, Минимальный остаток (для уведомления "Заказать"), Флаг "Есть разрешение на ввоз", Заметки.
Сущность "Синоним" (Alias):

Связь "Один ко многим".
Пример: Товар "Hytera BD505". Синонимы: "BD505", "Рация Хайтера 505".
Логика: При вводе любого синонима в поиске, система подставляет ID основного товара.
3.3. Модуль "Журнал операций" (Вкладка "Рабочая")
Основное рабочее место. Таблица всех транзакций.

Типы операций (Логика пересчета):

Приход: Склад +
Продажа (Оплата сразу): Склад -
Бронирование: Склад (не меняется), Бронь +
Снятие брони: Склад (не меняется), Бронь -
Продажа из брони: Склад -, Бронь -
Отгрузка в долг: Склад -, Счетчик Долга + (Товар ушел, денег нет).
Закрытие долга (Деньги пришли): Склад (не меняется), Счетчик Долга -.
Возврат товара: Склад +.
Интерфейс добавления записи:

Поле "Оборудование" должно быть Smart Combobox:
Пользователь пишет "Хайтера", система ищет по синонимам.
Если совпадений нет — предлагает: "Создать новый товар" или "Добавить как синоним к...".
Редактирование:

Пользователь может нажать на любую старую запись, изменить цифру или дату.
Важно: После изменения система должна полностью пересчитать текущие остатки на складе.
3.4. Дашборд (Главная)
Сводная информация для быстрого взгляда:

Виджет "Товары заканчиваются" (где Остаток < Мин. лимита).
Виджет "Активные долги" (список клиентов и товаров, за которые не заплатили).
Виджет "Всего в брони".
4. Критически важные функции (System)

4.1. Импорт из Excel (Migration Tool)
При первом запуске пользователь должен иметь возможность загрузить текущий файл .xlsx.

Разработчик должен сделать маппинг колонок (Сопоставить колонку "Наименование" из файла с полем в БД).
Система должна автоматически создать товары в Справочнике на основе импорта.
4.2. Система Бэкапов (Data Safety)
Так как база локальная (SQLite), потеря файла = потеря бизнеса.

Авто-бэкап: При закрытии программы делать копию базы в папку Documents/InventoryBackups с датой в названии.
Кнопка в настройках: "Сохранить резервную копию вручную".
4.3. Валидация
Не давать удалить Товар из справочника, если по нему есть операции в Журнале (иначе история сломается). Вместо удаления использовать статус "Архивный".
Предупреждать, если попытка списания (Продажа) превышает текущий остаток. (Разрешать списать "в минус" только с подтверждением, подсвечивать красным).
5. Дизайн и Ассеты
Использовать векторные иконки: Lucide React.
Шрифт: Inter или Roboto (хорошая читаемость цифр).
Темная тема: Не просто черный фон, а оттенки темно-серого (slate-900, slate-800) для снижения нагрузки на глаза. Акцентный цвет (кнопки) — спокойный синий или зеленый.
6. Итоговый артефакт
Разработчик сдает:

Исходный код (Git).
Собранный установщик .exe (через electron-builder).
Инструкцию по установке (хотя она должна быть "в один клик").
